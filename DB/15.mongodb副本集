在多个数据服务器上存储数据副本,实现数据的同步
提高数据可用性,安全性,方便数据故障恢复

至少需要2个节点.其中一个主节点,其他都是从节点,从节点负责复制主节点的数据

搭配方式:一主一从,一主多从

主节点记录所有操作oplog,从节点定期轮询主节点获取这些操作,然后对自己的数据副本做这些操作,从而保证从节点的数据与主节点的数据一致

主从复制:
主节点启动加 -master参数
从节点启动加-slave 和-source参数

主从复制优点:
	从库可以提供查询
	减轻主节点访问压力
	从节点执行备份,避免锁定主节点数据
	主节点故障时,可以快速切换到从节点,实现高可用

=====================================================
部署MongoDB副本集

1.启用副本集并制定集群名名称rs1

2.定义集群成员列表
config={
... _id:"rs1",
... members:[
... {_id:0,host:"192.168.4.51:27051"},
... {_id:1,host:"192.168.4.52:27052"},
... {_id:2,host:"192.168.4.53:27053"}
... ]
... }

3.创建集群
rs.initiate(config)

4.查看集群
rs.status()


5.客户端测试集群
   
##从库需要敲这条命令,否则无法查看数据

6.测试集群高可用
停止当前主库的mongodb服务
在副本主机查看集群状态信息

















