192.168.4.52:6352> SLAVEOF 192.168.4.51 6351
##将当前数据库指定为51的从库(临时设置,立即生效)


192.168.4.52:6352> slave no one
##将52还原为独立的数据库服务器

永久设置为192.168.4.51的从库
vim /etc/redis/6379.conf

...
slaveof 192.168.4.51 6351
...
masterauth 123456
...

================================================
哨兵模式
vim /etc/sentinel.conf 
bind 0.0.0.0  ##本机所有IP监听
sentinel monitor redis51 192.168.4.51 6351 1 ##监听主库的IP和端口,1个哨兵监听答就生效,redis51是自定义的名字
sentinel auth-pass redis51 123456 ##被监听主库的登录密码,redis51跟上面一致


redis-sentinel /etc/sentinel.conf
##开启哨兵模式

注意:恢复的主库服务器会成为当前主库的从库,并同步宕机期间的数据

============================================

主从同步原理
slave向master发送sync命令
master启动后台存盘进程,并收集所有修改数据命令
master存盘完成后,将整个数据传给slave



缺点:网络繁忙,系统繁忙时会产生数据同步延时的问题
